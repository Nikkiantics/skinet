{"ast":null,"code":"import { ShopParams } from '../shared/models/shopParams';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shop.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"ngx-bootstrap/pagination\";\nimport * as i4 from \"../shared/components/pager/pager.component\";\nimport * as i5 from \"./product-item/product-item.component\";\nconst _c0 = [\"search\"];\nfunction ShopComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const sort_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sort_r6.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sort_r6.name, \" \");\n  }\n}\nfunction ShopComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_10_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const brand_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.onBrandSelected(brand_r7.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const brand_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", brand_r7.id === ctx_r1.shopParams.brandId);\n    i0.ɵɵproperty(\"value\", brand_r7.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", brand_r7.name, \" \");\n  }\n}\nfunction ShopComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_14_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const type_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onTypeSelected(type_r10.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r10 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", type_r10.id === ctx_r2.shopParams.typeId);\n    i0.ɵɵproperty(\"value\", type_r10.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", type_r10.name, \" \");\n  }\n}\nfunction ShopComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"app-product-item\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r13);\n  }\n}\nfunction ShopComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"app-pager\", 24);\n    i0.ɵɵlistener(\"pageChanged\", function ShopComponent_div_35_Template_app_pager_pageChanged_1_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onPageChanged($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pageSize\", ctx_r5.shopParams.pageSize)(\"totalCount\", ctx_r5.totalCount);\n  }\n}\nexport let ShopComponent = /*#__PURE__*/(() => {\n  class ShopComponent {\n    constructor(shopService) {\n      this.shopService = shopService;\n      this.shopParams = new ShopParams();\n      this.sortOptions = [{\n        name: 'Alphabetical',\n        value: 'name'\n      }, {\n        name: 'Price: Low to high',\n        value: 'priceAsc'\n      }, {\n        name: 'Price: High to low',\n        value: 'priceDesc'\n      }];\n    }\n    ngOnInit() {\n      this.getProducts();\n      this.getBrands();\n      this.getTypes();\n    }\n    getProducts() {\n      this.shopService.getProducts(this.shopParams).subscribe(response => {\n        this.products = response.data;\n        this.shopParams.pageNumber = response.pageIndex;\n        this.shopParams.pageSize = response.pageSize;\n        this.totalCount = response.count;\n      }, error => {\n        console.log(error);\n      });\n    }\n    getBrands() {\n      this.shopService.getBrands().subscribe(response => {\n        this.brands = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n    getTypes() {\n      this.shopService.getTypes().subscribe(response => {\n        this.types = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n    onBrandSelected(brandId) {\n      this.shopParams.brandId = brandId;\n      this.shopParams.pageNumber = 1;\n      this.getProducts();\n    }\n    onTypeSelected(typeId) {\n      this.shopParams.typeId = typeId;\n      this.shopParams.pageNumber = 1;\n      this.getProducts();\n    }\n    onSortSelected(sort) {\n      this.shopParams.sort = sort;\n      this.getProducts();\n    }\n    onPageChanged(event) {\n      if (this.shopParams.pageNumber !== event) {\n        this.shopParams.pageNumber = event;\n        this.getProducts();\n      }\n    }\n    onSearch() {\n      this.shopParams.search = this.searchTerm.nativeElement.value;\n      this.shopParams.pageNumber = 1;\n      this.getProducts();\n    }\n    onReset() {\n      this.searchTerm.nativeElement.value = '';\n      this.shopParams = new ShopParams();\n      this.getProducts();\n    }\n  }\n  ShopComponent.ɵfac = function ShopComponent_Factory(t) {\n    return new (t || ShopComponent)(i0.ɵɵdirectiveInject(i1.ShopService));\n  };\n  ShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShopComponent,\n    selectors: [[\"app-shop\"]],\n    viewQuery: function ShopComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchTerm = _t.first);\n      }\n    },\n    decls: 38,\n    vars: 10,\n    consts: [[1, \"container\"], [1, \"row\"], [1, \"col-3\"], [1, \"text-warning\", \"ml-3\"], [1, \"custom-select\", \"my-3\", 3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"mb-3\"], [\"class\", \"list-group-item\", 3, \"active\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"my-3\"], [1, \"col-9\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"pb-2\"], [1, \"form-inline\", \"mt-2\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"form-control\", \"mr-2\", 3, \"keyup.enter\"], [\"search\", \"\"], [1, \"btn\", \"btn-outline-primary\", \"my-2\", 3, \"click\"], [1, \"btn\", \"btn-outline-success\", \"ml-2\", \"my-2\", 3, \"click\"], [\"class\", \"col-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\"], [\"previousText\", \"\\u2039\", \"nextText\", \"\\u203A\", \"firstText\", \"\\u00AB\", \"lastText\", \"\\u00BB\", 3, \"boundaryLinks\", \"totalItems\"], [3, \"value\"], [1, \"list-group-item\", 3, \"value\", \"click\"], [1, \"col-4\", \"mb-4\"], [3, \"product\"], [3, \"pageSize\", \"totalCount\", \"pageChanged\"]],\n    template: function ShopComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"section\", 2)(3, \"h5\", 3);\n        i0.ɵɵtext(4, \"Sort\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"select\", 4);\n        i0.ɵɵlistener(\"change\", function ShopComponent_Template_select_change_5_listener($event) {\n          return ctx.onSortSelected($event.target.value);\n        });\n        i0.ɵɵtemplate(6, ShopComponent_option_6_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"h5\", 3);\n        i0.ɵɵtext(8, \"Brands\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ul\", 6);\n        i0.ɵɵtemplate(10, ShopComponent_li_10_Template, 2, 4, \"li\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"h5\", 3);\n        i0.ɵɵtext(12, \"Types\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"ul\", 8);\n        i0.ɵɵtemplate(14, ShopComponent_li_14_Template, 2, 4, \"li\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"section\", 9)(16, \"div\", 10)(17, \"header\")(18, \"span\");\n        i0.ɵɵtext(19, \"Showing \");\n        i0.ɵɵelementStart(20, \"strong\");\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(22, \" of \");\n        i0.ɵɵelementStart(23, \"strong\");\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(25, \"Results\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 11)(27, \"input\", 12, 13);\n        i0.ɵɵlistener(\"keyup.enter\", function ShopComponent_Template_input_keyup_enter_27_listener() {\n          return ctx.onSearch();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function ShopComponent_Template_button_click_29_listener() {\n          return ctx.onSearch();\n        });\n        i0.ɵɵtext(30, \"Search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function ShopComponent_Template_button_click_31_listener() {\n          return ctx.onReset();\n        });\n        i0.ɵɵtext(32, \"Reset\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(33, \"div\", 1);\n        i0.ɵɵtemplate(34, ShopComponent_div_34_Template, 2, 1, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(35, ShopComponent_div_35_Template, 2, 2, \"div\", 17);\n        i0.ɵɵelementStart(36, \"div\", 18);\n        i0.ɵɵelement(37, \"pagination\", 19);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sortOptions);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.brands);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.types);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate2(\" \", (ctx.shopParams.pageNumber - 1) * ctx.shopParams.pageSize + 1, \" - \", ctx.shopParams.pageNumber * ctx.shopParams.pageSize > ctx.totalCount ? ctx.totalCount : ctx.shopParams.pageNumber * ctx.shopParams.pageSize, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"\", ctx.totalCount, \"16\");\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.totalCount > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"boundaryLinks\", true)(\"totalItems\", 77);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.PaginationComponent, i4.PagerComponent, i5.ProductItemComponent]\n  });\n  return ShopComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}